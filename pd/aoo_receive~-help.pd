#N canvas 1046 73 636 611 12;
#X declare -lib aoo;
#X text 276 308 creation arguments:;
#X obj 88 239 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 0 256;
#N canvas 961 0 660 906 events 0;
#X obj 37 32 inlet;
#X text 104 598 the source format has changed;
#X text 100 1002 blocks have been lost;
#X text 100 1057 blocks arrived out of order;
#X text 100 1112 blocks have been resent;
#X text 63 144 a source has been added;
#X text 101 542 the source has change its state (0: stop \, 1: play);
#X obj 37 85 outlet;
#X msg 38 219 invite_timeout <host> <port> <ID>;
#X text 64 243 an invite request for the given source has timed out;
#X text 101 489 the stream has been stopped;
#X text 103 407 a new stream has been started., f 32;
#X text 103 427 'type' and 'data' are the (optional) stream metadata \, see [pd metadata] in [aoo_send~], f 45;
#X obj 115 60 tgl 15 0 \$0-ping \$0-ping empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X text 138 58 post pings;
#N canvas 899 257 365 267 route 0;
#X obj 83 58 inlet;
#X obj 83 161 outlet;
#X obj 83 98 route event, f 12;
#N canvas 981 333 450 438 filter 0;
#X obj 58 52 inlet;
#X obj 130 302 outlet;
#X obj 58 83 t a a;
#X obj 58 333 list prepend event;
#X obj 58 363 list trim;
#X obj 90 113 list split 3;
#X obj 58 301 spigot;
#X obj 130 231 t b b;
#X obj 162 269 f;
#X msg 97 268 1;
#X text 196 203 filter ping events;
#X obj 58 393 print aoo_receive~;
#X obj 180 244 r \$0-ping;
#X obj 130 201 sel ping;
#X obj 130 140 t s a;
#N canvas 996 172 347 332 metadata 0;
#X obj 56 48 inlet;
#X obj 56 169 oscparse;
#X obj 99 202 fudiparse;
#X obj 56 292 print aoo_receive~;
#X obj 56 235 list prepend metadata;
#X obj 56 263 list trim;
#X obj 56 75 list trim;
#X obj 56 107 route start;
#X obj 56 139 route osc fudi bang;
#X connect 0 0 6 0;
#X connect 1 0 4 0;
#X connect 2 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 3 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 1 0;
#X connect 8 1 2 0;
#X connect 8 3 4 0;
#X restore 162 169 pd metadata;
#X connect 0 0 2 0;
#X connect 2 0 6 0;
#X connect 2 1 5 0;
#X connect 3 0 4 0;
#X connect 4 0 11 0;
#X connect 5 1 14 0;
#X connect 6 0 3 0;
#X connect 7 0 1 0;
#X connect 7 1 8 0;
#X connect 8 0 6 1;
#X connect 9 0 6 1;
#X connect 12 0 8 1;
#X connect 13 0 7 0;
#X connect 13 1 9 0;
#X connect 14 0 13 0;
#X connect 14 1 15 0;
#X restore 83 130 pd filter;
#X obj 164 131 print aoo_receive~;
#X connect 0 0 2 0;
#X connect 2 0 3 0;
#X connect 2 1 4 0;
#X connect 3 0 1 0;
#X restore 37 59 pd route;
#X f 9;
#X msg 38 122 add <host> <port> <ID>;
#X msg 38 170 remove <host> <port> <ID>;
#X text 65 192 a source has been removed;
#X msg 40 271 uninvite_timeout <host> <port> <ID>;
#X text 66 295 an uninvite request for the given source has timed out;
#X text 40 322 source events:;
#X msg 42 349 event <host> <port> <ID> ...;
#X msg 68 383 ... start [<type> <data...>];
#X msg 69 466 ... stop;
#X msg 69 518 ... state <state>;
#X msg 68 570 ... format <codec> <channels> <blocksize> <sr> ..., f 53;
#X text 99 1169 blocks have been dropped at the source;
#X text 72 1196 ---;
#X msg 67 974 ... block_lost <count>;
#X msg 68 1030 ... block_reordered <count>;
#X msg 68 1085 ... block_resent <count>;
#X msg 69 1141 ... block_dropped <count>;
#X msg 68 821 ... overrun;
#X msg 68 893 ... underrun;
#X msg 66 628 ... ping <delta1> <delta2> <rtt>;
#X text 105 756 NOTE: The roundtrip time is not necessarily the same as the sum of the deltas \, especially if the clocks are not perfectly in sync. If one clock runs significantly early or late \, the deltas can even be negative!, f 73;
#X text 104 735 <rtt> is the approx. roundtrip time (in ms) \, as measured on the source., f 71;
#X text 97 845 jitter buffer overrun. If this happens repeatedly \, try to increase the latency.;
#X text 96 921 jitter buffer underrun. If this happens repeatedly \, try to increase the latency.;
#X text 104 694 <delta1> is the approx. delay between sink and source (in ms), f 62;
#X text 104 715 <delta2> is the approx. delay between sink and source (in ms), f 62;
#X text 102 657 A periodic message exchanged between sink and source that may be used for network latency estimation., f 71;
#X connect 0 0 15 0;
#X connect 15 0 7 0;
#X restore 182 357 pd events;
#X text 35 24 aoo_receive~: receive one or more AoO audio streams;
#X msg 522 539 \; pd dsp \$1;
#X obj 522 516 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X msg 79 201 list_sources;
#X text 179 192 list sources. This will output a message [source <host> <port> <id>( for each source., f 45;
#X obj 474 24 declare -lib aoo;
#X obj 38 330 aoo_receive~ 9999 1 2;
#X msg 38 64 invite localhost 9998 1;
#X text 216 64 invite an AoO source (hostname \, port \, source ID);
#X msg 46 98 uninvite localhost 9998 1;
#X text 236 97 uninvite an AoO source (hostname \, port \, source ID);
#X obj 36 447 aoo_receive~ 9999 2 2;
#X obj 202 502 aoo_send~ 9999 1 2;
#X text 276 336 1) port number for incoming messages;
#X text 276 362 2) sink ID \, must be unique for all;
#X text 297 382 [aoo_receive~] instances on the same port;
#X text 277 408 3) number of channels (default: 1);
#X text 33 421 another sink on the same port;
#X obj 36 472 env~;
#X floatatom 36 496 5 0 0 0 - - - 0;
#X obj 107 473 env~;
#X floatatom 107 497 5 0 0 0 - - - 0;
#X text 199 478 the same port can also be used by sources;
#X msg 58 130 uninvite;
#X text 129 129 uninvite all AoO sources;
#N canvas 808 108 547 640 advanced 0;
#X obj 39 596 outlet;
#X obj 79 227 nbx 8 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 0 256;
#X obj 88 280 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 0 256;
#X msg 88 304 packetsize \$1;
#X text 194 302 max. UDP packet size (default: 512 bytes);
#X msg 95 342 reset;
#X text 152 335 reset all sources (e.g. if the stream seems to be broken or out of sync), f 47;
#X text 270 376 reset individual source;
#X msg 101 375 reset localhost 9998 1;
#X obj 39 28 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 0 256;
#X msg 99 28 0;
#X text 133 28 stop listening;
#X msg 39 53 port \$1;
#X text 101 53 change receive port;
#X msg 49 102 id \$1;
#X obj 49 83 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 0 256;
#X text 103 101 change AoO sink ID;
#X msg 113 451 resend \$1;
#X obj 113 429 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X msg 118 506 resend_limit \$1;
#X obj 118 485 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 0 256;
#X obj 124 536 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 0 256;
#X msg 124 557 resend_interval \$1;
#X text 242 506 max. number of frames to request per message (default: 16), f 34;
#X text 262 555 time interval (ms) between resend requests (default: 10 ms), f 34;
#X text 194 445 enable/disable resending of lost packets (enabled by default), f 40;
#X text 110 405 packet resending:;
#X text 268 129 get the current buffer fill ratio of the given source, f 27;
#X text 269 162 0: empty \, 1: full;
#X msg 59 135 fill_ratio localhost 9998 1;
#X msg 69 196 dynamic_resampling \$1;
#X obj 69 174 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X text 233 197 enable/disable dynamic resampling;
#X msg 79 247 dll_bandwidth \$1;
#X text 209 246 time DLL filter bandwidth for dynamic resampling (default: 0.0001), f 38;
#X connect 1 0 33 0;
#X connect 2 0 3 0;
#X connect 3 0 0 0;
#X connect 5 0 0 0;
#X connect 8 0 0 0;
#X connect 9 0 12 0;
#X connect 10 0 12 0;
#X connect 12 0 0 0;
#X connect 14 0 0 0;
#X connect 15 0 14 0;
#X connect 17 0 0 0;
#X connect 18 0 17 0;
#X connect 19 0 0 0;
#X connect 20 0 19 0;
#X connect 21 0 22 0;
#X connect 22 0 0 0;
#X connect 29 0 0 0;
#X connect 30 0 0 0;
#X connect 31 0 30 0;
#X connect 33 0 0 0;
#X restore 99 295 pd advanced;
#X text 37 542 see also;
#X obj 107 542 aoo_send~;
#X text 174 262 increase for jittery \, unreliable networks!;
#X obj 182 383 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#N canvas 0 50 450 387 output 0;
#X obj 105 188 inlet~;
#X obj 173 191 inlet~;
#X obj 238 100 loadbang;
#X msg 238 124 -100;
#X obj 238 148 s /\$0/master;
#X obj 143 108 nbx 5 14 -100 0 0 0 /\$0/master /\$0/master empty 0 -8 0 10 #fcfcfc #000000 #000000 0 256;
#X obj 201 105 cnv 15 1 1 empty empty dB 0 12 0 14 #fcfcfc #000000 0;
#X obj 105 105 cnv 15 1 1 empty empty Vol: 0 12 0 14 #fcfcfc #000000 0;
#X obj 227 191 r /\$0/master;
#X obj 227 215 + 100;
#X obj 227 239 dbtorms;
#X msg 227 263 \$1 50;
#X obj 227 288 line~;
#X obj 105 322 *~;
#X obj 174 323 *~;
#X obj 104 352 dac~;
#X connect 0 0 13 0;
#X connect 1 0 14 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 13 1;
#X connect 12 0 14 1;
#X connect 13 0 15 0;
#X connect 14 0 15 1;
#X coords 0 -1 1 1 120 30 2 100 100;
#X restore 37 356 pd output;
#X obj 184 542 aoo_client;
#X obj 270 542 aoo_server;
#N canvas 969 173 529 559 metadata 0;
#X msg 31 325 metadata <type> <data...>;
#X msg 46 354 metadata;
#X text 30 143 The metadata consists of a 'type' symbol \, followed by a list of bytes. 'type' can be either a user-defined name or one of the following pre-defined names:;
#X text 39 197 "text": UTF-8 encoded plain text;
#X text 41 216 "json": UTF-8 encoded JSON;
#X text 42 238 "xml": UTF-8 encoded XML;
#X text 43 261 "osc": an OSC message;
#X text 120 354 unset metadata;
#X obj 62 414 oscformat;
#X msg 62 385 set /foo \, 1 2 3;
#X obj 62 443 list prepend metadata osc;
#X text 30 108 The actual content and its interpretation is user-defined and will be different for each application., f 58;
#X obj 251 413 fudiformat;
#X text 139 414 "osc";
#X text 333 414 "fudi";
#X text 42 285 "fudi": a FUDI message;
#X obj 62 471 list trim;
#X obj 251 443 list prepend metadata fudi;
#X obj 31 506 outlet;
#X text 31 35 Users can add metadata to their invitations \, e.g. to request format parameters \, channel layouts \, musical content \, etc.;
#X text 30 71 The metadata will be output in the [aoo_send~] object as part of the 'invite' event message.;
#X msg 251 385 foo 1 2 3;
#X connect 0 0 18 0;
#X connect 1 0 18 0;
#X connect 8 0 10 0;
#X connect 9 0 8 0;
#X connect 10 0 16 0;
#X connect 12 0 17 0;
#X connect 16 0 18 0;
#X connect 17 0 16 0;
#X connect 21 0 12 0;
#X restore 69 161 pd metadata;
#X text 160 161 set invitation metadata;
#X msg 87 262 latency \$1;
#X text 175 241 latency in ms (default: 25 ms);
#X text 277 435 4) latency (default: 25 ms);
#X connect 1 0 38 0;
#X connect 2 0 32 0;
#X connect 5 0 4 0;
#X connect 6 0 9 0;
#X connect 9 0 33 0;
#X connect 9 1 33 1;
#X connect 9 2 2 0;
#X connect 10 0 9 0;
#X connect 12 0 9 0;
#X connect 14 0 21 0;
#X connect 14 1 23 0;
#X connect 21 0 22 0;
#X connect 23 0 24 0;
#X connect 26 0 9 0;
#X connect 28 0 9 0;
#X connect 36 0 9 0;
#X connect 38 0 9 0;
